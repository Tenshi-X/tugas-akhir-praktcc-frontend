<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Kebutuhan Buku - Pengadaan</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="no-background">
<nav>
        <div class="brand">Unibookstore</div>
        <a href="index.html">Logout</a>
        <a href="main.html">Home</a>
        <a href="admin.html">Admin</a>
        <a href="pengadaan.html">Pengadaan</a>
    </nav>
    <div class="container mx-auto p-8">
        <!-- Form tambah penerbit -->
        <h3 class="text-xl font-bold mb-4">Tambah Penerbit</h3>
        <form id="form_add_penerbit" >
            <!-- ID Penerbit -->
            <div class="mb-4">
                <label for="id_penerbit" class="block text-sm font-medium text-gray-600">ID Penerbit:</label>
                <input type="text" id="id_penerbit" name="id_penerbit" required class="mt-1 p-2 border border-gray-300 rounded-md w-full">
            </div>

            <!-- Nama -->
            <div class="mb-4">
                <label for="nama" class="block text-sm font-medium text-gray-600">Nama:</label>
                <input type="text" id="nama" name="nama" required class="mt-1 p-2 border border-gray-300 rounded-md w-full">
            </div>

            <!-- Alamat -->
            <div class="mb-4">
                <label for="alamat" class="block text-sm font-medium text-gray-600">Alamat:</label>
                <input type="text" id="alamat" name="alamat" required class="mt-1 p-2 border border-gray-300 rounded-md w-full">
            </div>

            <!-- Kota -->
            <div class="mb-4">
                <label for="kota" class="block text-sm font-medium text-gray-600">Kota:</label>
                <input type="text" id="kota" name="kota" required class="mt-1 p-2 border border-gray-300 rounded-md w-full">
            </div>

            <!-- Telepon -->
            <div class="mb-4">
                <label for="telepon" class="block text-sm font-medium text-gray-600">Telepon:</label>
                <input type="text" id="telepon" name="telepon" required class="mt-1 p-2 border border-gray-300 rounded-md w-full">
            </div>

            <div class="mb-4">
                <label for="email" class="block text-sm font-medium text-gray-600">Email:</label>
                <input type="text" id="email" name="email" required class="mt-1 p-2 border border-gray-300 rounded-md w-full">
            </div>

            <!-- Submit button -->
            <button type="submit" id="penerbitButton" class="bg-blue-500 text-white p-2 rounded-md cursor-pointer">
                Tambah Penerbit
            </button>
        </form>
    </div>
    </div>
    <script>
        const formPenerbit = document.querySelector('#form_add_penerbit');
        const postToPenerbit = async (body) => {
            try {
                const response = await fetch('https://perpustakaan-tdrgo7wffa-et.a.run.app/penerbit/create', {
                method: 'POST',
                headers: {
                    "Content-Type": "application/json"
                },
                body: JSON.stringify(body)
                });

                if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
                }
                return await response;
            } catch (error) {
                console.error('Error fetching data:', error);
            }
        };

        formPenerbit.addEventListener('submit', async (event) => {
            event.preventDefault();
            const body = {
                "id_penerbit": id_penerbit.value,
                "nama": nama.value,
                "alamat": alamat.value,
                "kota": kota.value,
                "telepon": telepon.value,
                "email": email.value,
            };
            console.log(body)
            const result = await postToPenerbit(body);
            
            if (result.msg = "Data Penerbit berhasil dibuat") {
                location.replace('admin.html')
            }
        });
    </script>
</body>
</html>